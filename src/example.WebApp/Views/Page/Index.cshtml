@model cloudscribe.SimpleContent.Web.ViewModels.PageViewModel
@using cloudscribe.SimpleContent.Models
@using cloudscribe.SimpleContent.Web.Design
@using cloudscribe.SimpleContent.Web
@using cloudscribe.SimpleContent.Web.TagHelpers
@using Microsoft.Extensions.Options
@using Microsoft.Extensions.Localization
@inject IRoleSelectorProperties roleSelector
@inject IOptions<IconCssClasses> iconClassesAccessor
@inject IStringLocalizer<SimpleContent> sr
@{ 
    var icons = iconClassesAccessor.Value;
}
@section Meta {
    @{await Html.RenderPartialAsync("MetaPartial", Model); }
}
@section Styles {
    @{await Html.RenderPartialAsync("StylePartial", Model); }
}
@section Toolbar {
    @if (Model.CanEdit)
    {
        await Html.RenderPartialAsync("ToolsPartial", Model);  
    }
}
@{await Html.RenderPartialAsync("PageDetailPartial", Model); }
@if (Context.Request.Path == "/")
{
    @await Component.InvokeAsync("RecentPosts", new { viewName = "RecentPosts", numberToShow = 3 })
}


@section Bottom {
   
}
@section Scripts {
    @if (Model.CanEdit)
    {
        @*await Html.RenderPartialAsync("EditorScriptsPartial"); *@
        @if (!string.IsNullOrEmpty(Model.Mode))
        {
            if (roleSelector.RequiredScriptPaths != null)
            {
                foreach (var s in roleSelector.RequiredScriptPaths)
                {
                    <script src="@Url.Content(s)"></script>
                }
            }
        }
    }
    @if (Model.CommentsAreOpen && Model.Mode.Length == 0)
    {
        await Html.RenderPartialAsync("CommentScriptsPartial");
    }
}
